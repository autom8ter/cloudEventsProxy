# eventgate

An identity-aware gateway for message queues & event sinks

Status: MVP

[![GoDoc](https://godoc.org/github.com/autom8ter/eventgate?status.svg)](https://godoc.org/github.com/autom8ter/eventgate/eventgate-client-go)

- [API Documentation](https://autom8ter.github.io/eventgate/)
                                        
## Features
- [x] [Headless](https://en.wikipedia.org/wiki/Headless_software)
- [x] [gRPC](https://grpc.io/) support
    - [protobuf schema](schema.proto)
- [x] Optional Embedded [graphQL](https://graphql.org/) support `/graphql` (transcoding)
    - [graphQL schema](schema.graphql)
- [x] Optional Embedded REST support `/` (transcoding)
    - [open api schema](schema.swagger.json)
- [x] Optional Embedded [grpcweb](https://grpc.io/docs/platforms/web/basics/) support (transcoding)
- [x] Optional Metrics Server(prometheus/pprof)
- [x] Authentication - JWT/OAuth with remote [JWKS](https://auth0.com/docs/tokens/json-web-tokens/json-web-key-sets) verification
- [x] Authorization - [Rego](https://www.openpolicyagent.org/docs/latest/policy-language/) based Authorization engine
- [x] Autogenerated Client gRPC SDK's
    - [x] Go
        - [![GoDoc](https://godoc.org/github.com/autom8ter/eventgate?status.svg)](https://godoc.org/github.com/autom8ter/eventgate/eventgate-client-go)
    - [x] [Node](./gen/grpc/node)
    - [x] [PHP](./gen/grpc/php)
    - [x] [C#](./gen/grpc/csharp)
    - [x] [Java](./gen/grpc/java)
    - [x] [gRPC Web](./gen/grpc/web)
    - [ ] Python
    - [ ] Ruby
- [x] Structured JSON Logs
- [x] [Sample Kubernetes Manifest](k8s.yaml)
- [x] Pluggable Backends
    - [x] In-Memory
    - [x] Nats
    - [x] Nats Streaming(Stan)
    - [x] Redis
    - [x] Kafka
    - [ ] RabbitMQ

    
## Command Line

```
eventgate -h
Usage of eventgate:
      --config string   path to config file (env: EVENTGATE_CONFIG) (default "config.yaml")
```

## Sample Config

```yaml
# port to serve on. metrics server is started on this port+1 if enabled
port: 8080
# enable graphQL API
graphql: true
# enable rest API
rest: true
# enable metrics server
metrics: true
# enable grpcweb support
grpcweb: true
cors:
  allowed_origins:
    - "*"
  allowed_methods:
    - "POST"
    - "PUT"
    - "GET"
    - "OPTIONS"
  allowed_headers:
    - "*"
#tls:
#  cert_file: "/tmp/server.cert"
#  key_file: "/tmp/server.key"
logging:
  # enable debug logs
  debug: true

# pluggable backend: [inmem, redis, nats, stan, kafka]
backend:
  name: "inmem"

#backend:
#  name: "redis"
#  config:
#    addr: "0.0.0.0:6379"
#backend:
#  name: "nats"
#  config:
#    addr: "0.0.0.0:4444"
#backend:
#  name: "stan"
#  config:
#    addr: "0.0.0.0:4444"
#backend:
#  name: "kafka"
#  config:
#    addr: "0.0.0.0:9092"

# authentication options
authentication:
  # json web keys uri for authentication.
  # if empty, inbound jwt's will not be verified.
  jwks_uri: ""

# authorization options(input.claims(object), input.method(string), input.body(object), input.client_stream(bool), input.server_stream(bool)
authorization:
  requests: |
    package eventgate.authz

    default allow = false

    allow {
      input.claims.sub = "1234567890"
      input.claims.name = "John Doe"
    }
  responses: |
    package eventgate.authz

    default allow = true

```

## Notes
